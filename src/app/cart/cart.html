<div class="cart-container">
      <!-- Cart Header -->
      <div class="cart-header">
        <h2 class="cart-title">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 16.1 19 15 19H9C7.9 19 7 18.1 7 17V13M9 21C9.6 21 10 21.4 10 22S9.6 23 9 23 8 22.6 8 22 8.4 21 9 21ZM20 21C20.6 21 21 21.4 21 22S20.6 23 20 23 19 22.6 19 22 19.4 21 20 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Shopping Cart
        </h2>
        <span class="cart-count">{{ cartProducts.length }} items</span>
      </div>

      <!-- Empty Cart State -->
      <div *ngIf="cartProducts.length === 0" class="empty-cart">
        <div class="empty-cart-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 16.1 19 15 19H9C7.9 19 7 18.1 7 17V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3>Your cart is empty</h3>
        <p>Add some products to get started</p>
        <button class="continue-shopping-btn" (click)="continueShopping()">
          Continue Shopping
        </button>
      </div>

      <!-- Cart Items -->
      <div *ngIf="cartProducts.length > 0" class="cart-content">
        <div class="cart-items">
          <div *ngFor="let item of cartProducts; trackBy: trackByProductId" class="cart-item">
            <!-- Product Image -->
            <div class="item-image">
              <img [src]="item.thumbnail" [alt]="item.title" (error)="onImageError($event)">
              <div *ngIf="item.discountPercentage > 0" class="discount-badge">
                -{{ item.discountPercentage | number:'1.0-0' }}%
              </div>
            </div>

            <!-- Product Details -->
            <div class="item-details">
              <div class="item-header">
                <h3 class="item-title">{{ item.title }}</h3>
                <button class="remove-btn" (click)="removeFromCart(item.id)" title="Remove item">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
              
              <div class="item-meta">
                <span class="item-brand">{{ item.brand }}</span>
                <span class="item-category">{{ item.category }}</span>
              </div>
              
              <div class="item-rating">
                <div class="stars">
                  <span *ngFor="let star of getStars(item.rating)" [class]="star.class">â˜…</span>
                </div>
                <span class="rating-value">({{ item.rating }})</span>
              </div>

              <!-- Quantity and Price Controls -->
              <div class="item-controls">
                <div class="quantity-controls">
                  <button class="qty-btn" (click)="decreaseQuantity(item)" [disabled]="item.quantity <= 1">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                  <input 
                    type="number" 
                    [(ngModel)]="item.quantity" 
                    (change)="updateQuantity(item)"
                    min="1" 
                    [max]="item.stock"
                    class="qty-input"
                  >
                  <button class="qty-btn" (click)="increaseQuantity(item)" [disabled]="item.quantity >= item.stock">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                </div>
                
                <div class="price-info">
                  <div class="item-price">
                    <span class="current-price">\${{ item.totalPrice | number:'1.2-2' }}</span>
                    <span *ngIf="item.discountPercentage > 0" class="original-price">
                      \${{ (item.price * item.quantity) | number:'1.2-2' }}
                    </span>
                  </div>
                  <div class="unit-price">
                    \${{ getDiscountedPrice(item) | number:'1.2-2' }} each
                  </div>
                </div>
              </div>

              <div *ngIf="item.stock <= 5" class="low-stock-warning">
                Only {{ item.stock }} left in stock
              </div>
            </div>
          </div>
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary">
          <div class="summary-card">
            <h3>Order Summary</h3>
            
            <div class="summary-row">
              <span>Subtotal ({{ getTotalItems() }} items)</span>
              <span>\${{ getSubtotal() | number:'1.2-2' }}</span>
            </div>
            
            <div class="summary-row" *ngIf="getTotalDiscount() > 0">
              <span>Discount</span>
              <span class="discount-amount">-\${{ getTotalDiscount() | number:'1.2-2' }}</span>
            </div>

            <div class="summary-row">
              <span>Shipping</span>
              <span>{{ getShippingCost() === 0 ? 'Free' : '$' + (getShippingCost() | number:'1.2-2') }}</span>
            </div>

            <div class="summary-row tax-row">
              <span>Tax (8%)</span>
              <span>\${{ getTax() | number:'1.2-2' }}</span>
            </div>

            <div class="summary-divider"></div>

            <div class="summary-row total-row">
              <span>Total</span>
              <span>\${{ getTotal() | number:'1.2-2' }}</span>
            </div>

            <button class="checkout-btn" (click)="checkout()" [disabled]="cartProducts.length === 0">
              Proceed to Checkout
            </button>

            <button class="continue-shopping-link" (click)="continueShopping()">
              Continue Shopping
            </button>
          </div>
        </div>
      </div>
    </div>